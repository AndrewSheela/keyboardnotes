<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adimai Naan Aandavarae - Musical Transposer</title>
    <!-- Add required libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            background-size: 400% 400%;
            animation: gradient 15s ease infinite;
            color: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 40px 20px;
        }

        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .container {
            max-width: 900px;
            width: 100%;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5rem;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
            color: #ffcc00;
        }

        .transpose-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
        }

        .lyrics-toggle {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .download-options {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
            flex-wrap: wrap;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 15px;
        }

        .color-toggle {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .color-option {
            padding: 8px 16px;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            font-size: 0.9rem;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
        }

        .color-option.active {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
        }

        .color-full {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .color-bw {
            background: linear-gradient(135deg, #666, #333);
            color: white;
        }

        .download-print-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .download-btn {
            padding: 12px 25px;
            font-size: 1.1rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            position: relative;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.4);
            outline: none;
            color: white;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
        }

        .download-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: all 0.6s ease;
        }

        .download-btn:hover::before {
            left: 100%;
        }

        .download-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.5);
        }

        .download-btn:active {
            transform: translateY(1px);
            box-shadow: 0 3px 15px rgba(0, 0, 0, 0.4);
        }

        .btn-image {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .btn-pdf {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .btn-print {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .toggle-btn {
            padding: 10px 20px;
            font-size: 1rem;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            outline: none;
        }

        .toggle-btn.active {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.4);
        }

        .toggle-transliteration {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .toggle-tamil {
            background: linear-gradient(135deg, #f093fb, #f5576c);
            color: white;
        }

        .transpose-display {
            font-size: 2rem;
            font-weight: bold;
            min-width: 80px;
            text-align: center;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 10px 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .btn {
            padding: 12px 25px;
            font-size: 1.2rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            position: relative;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            outline: none;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: all 0.5s ease;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-plus {
            background: linear-gradient(135deg, #00b09b, #96c93d);
            color: white;
        }

        .btn-minus {
            background: linear-gradient(135deg, #ff416c, #ff4b2b);
            color: white;
        }

        .btn-reset {
            background: linear-gradient(135deg, #4A00E0, #8E2DE2);
            color: white;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
        }

        .btn:active {
            transform: translateY(1px);
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.4);
        }

        .song-content {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            line-height: 1.6;
            font-size: 1.2rem;
        }

        .song-line {
            margin-bottom: 15px;
        }

        .chord-line {
            height: 25px;
            margin-bottom: 2px;
        }

        .chord {
            color: #ffcc00;
            font-weight: bold;
            display: inline-block;
            user-select: none;
            padding: 0 5px;
            border-radius: 3px;
            background: rgba(0, 0, 0, 0.5);
            font-size: 1rem;
            margin-right: 15px;
        }

        .lyrics-container {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .transliteration-line {
            display: flex;
            justify-content: flex-start;
            font-size: 1.4rem;
            font-weight: 500;
        }

        .tamil-line {
            display: flex;
            justify-content: flex-start;
            font-size: 1.2rem;
            font-weight: 500;
            color: #a0e7ff;
        }

        .word {
            text-align: center;
        }

        .instructions {
            text-align: center;
            margin-top: 20px;
            font-size: 1rem;
            opacity: 0.8;
        }

        /* Black and white styles for download */
        .bw-mode {
            background: white !important;
            color: black !important;
        }

        .bw-mode .container {
            background: white !important;
            color: black !important;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2) !important;
        }

        .bw-mode .song-content {
            background: #f8f9fa !important;
            color: black !important;
            border: 1px solid #dee2e6 !important;
        }

        .bw-mode .tamil-line {
            color: #2c3e50 !important;
        }

        .bw-mode .chord {
            color: #e74c3c !important;
            background: #ecf0f1 !important;
            border: 1px solid #bdc3c7 !important;
        }

        .bw-mode h1 {
            color: #2c3e50 !important;
        }

        .bw-mode h2 {
            color: #34495e !important;
        }

        .bw-mode .transpose-controls,
        .bw-mode .lyrics-toggle,
        .bw-mode .download-options,
        .bw-mode .download-print-controls {
            background: #ecf0f1 !important;
            color: #2c3e50 !important;
            border: 1px solid #bdc3c7 !important;
        }

        @media (max-width: 600px) {
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .song-content {
                font-size: 1rem;
                padding: 15px;
            }
            
            .transpose-display {
                font-size: 1.5rem;
            }
            
            .btn {
                padding: 10px 20px;
                font-size: 1rem;
            }
            
            .download-btn {
                padding: 10px 18px;
                font-size: 0.9rem;
            }
            
            .toggle-btn {
                padding: 8px 16px;
                font-size: 0.9rem;
            }
            
            .color-option {
                padding: 6px 12px;
                font-size: 0.8rem;
            }
            
            .transliteration-line {
                font-size: 1.2rem;
            }
            
            .tamil-line {
                font-size: 1rem;
            }
            
            .chord {
                font-size: 0.9rem;
            }
        }

        /* Print styles */
        @media print {
            body {
                background: white !important;
                color: black !important;
                padding: 0;
            }
            .container {
                background: white !important;
                color: black !important;
                box-shadow: none !important;
                max-width: 100% !important;
            }
            .transpose-controls,
            .lyrics-toggle,
            .download-options,
            .download-print-controls,
            .instructions {
                display: none !important;
            }
            .song-content {
                background: white !important;
                color: black !important;
            }
            .tamil-line {
                color: #0066cc !important;
            }
            .chord {
                color: #cc6600 !important;
                background: #f0f0f0 !important;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Adimai Naan Aandavarae</h1>
        
        <div class="transpose-controls">
            <button class="btn btn-minus" id="minusBtn">-</button>
            <div class="transpose-display" id="transposeDisplay">0</div>
            <button class="btn btn-plus" id="plusBtn">+</button>
            <button class="btn btn-reset" id="resetBtn">Reset</button>
        </div>
        
        <div class="lyrics-toggle">
            <button class="toggle-btn toggle-transliteration active" id="toggleTransliteration">
                Hide Transliteration
            </button>
            <button class="toggle-btn toggle-tamil active" id="toggleTamil">
                Hide Tamil
            </button>
        </div>

        <!-- Color Options -->
        <div class="download-options">
            <div class="color-toggle">
                <span style="font-weight: bold; margin-right: 10px;">Download Style:</span>
                <button class="color-option color-full active" id="colorFull">Full Color</button>
                <button class="color-option color-bw" id="colorBW">Black & White</button>
            </div>
        </div>

        <div class="download-print-controls">
            <button class="download-btn btn-image" id="downloadImage">
                üì∑ Download as Image
            </button>
            <button class="download-btn btn-pdf" id="downloadPDF">
                üìÑ Download as PDF
            </button>
            <button class="download-btn btn-print" id="printBtn">
                üñ®Ô∏è Print
            </button>
        </div>
        
        <div class="song-content" id="songContent"> 
            <h2 style="text-align:center; color:rgb(255, 162, 0);">Pallavi</h2>
            <!-- Line 1 -->
            <div class="song-line chord-line">
                <span class="chord" style="margin-left: 00px;">Gm7</span>
            </div>
            <div class="song-line lyrics-container">
                <div class="transliteration-line">
                    <span class="word" style="margin-left: 0px;">Adimai</span>
                    <span class="word" style="margin-left: 40px;">Naan</span>
                    <span class="word" style="margin-left: 40px;">Aandavarae</span>
                </div>
                <div class="tamil-line">
                    <span class="word" style="margin-left: 0px;">‡ÆÖ‡Æü‡Æø‡ÆÆ‡Øà</span>
                    <span class="word" style="margin-left: 30px;">‡Æ®‡Ææ‡Æ©‡Øç</span>
                    <span class="word" style="margin-left: 40px;">‡ÆÜ‡Æ£‡Øç‡Æü‡Æµ‡Æ∞‡Øá</span>
                </div>
            </div>
            
            <!-- Line 2 -->
            <div class="song-line chord-line">
                <span class="chord" style="margin-left: 130px;">Gm7</span>
                <span class="chord" style="margin-left: 215px;">Bb6</span>
            </div>
            <div class="song-line lyrics-container">
                <div class="transliteration-line">
                    <span class="word" style="margin-left: 0px;">Ennai</span>
                    <span class="word" style="margin-left: 70px;">Aatkollum</span>
                    <span class="word" style="margin-left: 60px;">En</span>
                    <span class="word" style="margin-left: 30px;">Theivamae</span>
                </div>
                <div class="tamil-line">
                    <span class="word" style="margin-left: 0px;">‡Æé‡Æ©‡Øç‡Æ©‡Øà</span>
                    <span class="word" style="margin-left: 20px;">‡ÆÜ‡Æü‡Øç‡Æï‡Øä‡Æ≥‡Øç‡Æ≥‡ØÅ‡ÆÆ‡Øç</span>
                    <span class="word" style="margin-left: 30px;">‡Æé‡Æ©‡Øç</span>
                    <span class="word" style="margin-left: 20px;">‡Æ§‡ØÜ‡ÆØ‡Øç‡Æµ‡ÆÆ‡Øá</span>
                </div>
            </div>
            
            <!-- Line 3 -->
            <div class="song-line chord-line">
                <span class="chord" style="margin-left: 0px;">Bb</span>
            </div>
            <div class="song-line lyrics-container">
                <div class="transliteration-line">
                    <span class="word" style="margin-left: 0px;">Theivamae</span>
                    <span class="word" style="margin-left: 30px;">Theivamae</span>
                </div>
                <div class="tamil-line">
                    <span class="word" style="margin-left: 0px;">‡Æ§‡ØÜ‡ÆØ‡Øç‡Æµ‡ÆÆ‡Øá</span>
                    <span class="word" style="margin-left: 35px;">‡Æ§‡ØÜ‡ÆØ‡Øç‡Æµ‡ÆÆ‡Øá</span>
                </div>
            </div>
            
            <!-- Line 4 -->
            <div class="song-line chord-line">
                <span class="chord" style="margin-left: 110px;">EbM7</span>
                <span class="chord" style="margin-left: 95px;">Gm</span>
            </div>
            <div class="song-line lyrics-container">
                <div class="transliteration-line">
                    <span class="word" style="margin-left: 0px;">Adimai</span>
                    <span class="word" style="margin-left: 40px;">Naan</span>
                    <span class="word" style="margin-left: 50px;">Aatkollum</span>
                </div>
                <div class="tamil-line">
                    <span class="word" style="margin-left: 0px;">‡ÆÖ‡Æü‡Æø‡ÆÆ‡Øà</span>
                    <span class="word" style="margin-left: 30px;">‡Æ®‡Ææ‡Æ©‡Øç</span>
                    <span class="word" style="margin-left: 30px;">‡ÆÜ‡Æü‡Øç‡Æï‡Øä‡Æ≥‡Øç‡Æ≥‡ØÅ‡ÆÆ‡Øç</span>
                </div>
            </div>
            <h2 style="text-align:center; color:rgb(255, 162, 0);">Saranam</h2>
        
            <!-- Line 5 -->
            <div class="song-line chord-line">
                <span class="chord" style="margin-left: 0px;">Bb</span>
            </div>
            <div class="song-line lyrics-container">
                <div class="transliteration-line">
                    <span class="word" style="margin-left: 05px;">En</span>
                    <span class="word" style="margin-left: 40px;">Udal</span>
                    <span class="word" style="margin-left: 40px;">Umakku</span>
                    <span class="word" style="margin-left: 40px;">Sontham</span>
                </div>
                <div class="tamil-line">
                    <span class="word" style="margin-left: 0px;">‡Æé‡Æ©‡Øç</span>
                    <span class="word" style="margin-left: 30px;">‡Æâ‡Æü‡Æ≤‡Øç</span>
                    <span class="word" style="margin-left: 30px;">‡Æâ‡ÆÆ‡Æï‡Øç‡Æï‡ØÅ‡Æö‡Øç</span>
                    <span class="word" style="margin-left: 30px;">‡Æö‡Øä‡Æ®‡Øç‡Æ§‡ÆÆ‡Øç</span>
                </div>
            </div>
            
            <!-- Line 6 -->
            <div class="song-line chord-line">
                <span class="chord" style="margin-left: 80px;">EbM7</span>
                <span class="chord" style="margin-left: 220px;">Gm</span>
            </div>
            <div class="song-line lyrics-container">
                <div class="transliteration-line">
                    <span class="word" style="margin-left: 0px;">Ithil</span>
                    <span class="word" style="margin-left: 40px;">Ennaalum</span>
                    <span class="word" style="margin-left: 40px;">Vaasam</span>
                    <span class="word" style="margin-left: 40px;">Seiyum</span>
                </div>
                <div class="tamil-line">
                    <span class="word" style="margin-left: 0px;">‡Æá‡Æ§‡Æø‡Æ≤‡Øç</span>
                    <span class="word" style="margin-left: 20px;">‡Æé‡Æ®‡Øç‡Æ®‡Ææ‡Æ≥‡ØÅ‡ÆÆ‡Øç</span>
                    <span class="word" style="margin-left: 40px;">‡Æµ‡Ææ‡Æö‡ÆÆ‡Øç</span>
                    <span class="word" style="margin-left: 40px;">‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡ØÅ‡ÆÆ‡Øç</span>
                </div>
            </div>
        </div>
        
        <div class="instructions">
            To adjust word positions: Edit the "margin-left" values in the HTML code for each word
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const transposeDisplay = document.getElementById('transposeDisplay');
            const minusBtn = document.getElementById('minusBtn');
            const plusBtn = document.getElementById('plusBtn');
            const resetBtn = document.getElementById('resetBtn');
            const chords = document.querySelectorAll('.chord');
            const toggleTransliterationBtn = document.getElementById('toggleTransliteration');
            const toggleTamilBtn = document.getElementById('toggleTamil');
            const transliterationLines = document.querySelectorAll('.transliteration-line');
            const tamilLines = document.querySelectorAll('.tamil-line');
            const downloadImageBtn = document.getElementById('downloadImage');
            const downloadPDFBtn = document.getElementById('downloadPDF');
            const printBtn = document.getElementById('printBtn');
            const colorFullBtn = document.getElementById('colorFull');
            const colorBWBtn = document.getElementById('colorBW');
            
            let transposeValue = 0;
            let showTransliteration = true;
            let showTamil = true;
            let downloadStyle = 'color'; // 'color' or 'bw'

            // Color option toggle
            colorFullBtn.addEventListener('click', function() {
                downloadStyle = 'color';
                colorFullBtn.classList.add('active');
                colorBWBtn.classList.remove('active');
                document.body.classList.remove('bw-mode');
            });

            colorBWBtn.addEventListener('click', function() {
                downloadStyle = 'bw';
                colorBWBtn.classList.add('active');
                colorFullBtn.classList.remove('active');
                document.body.classList.add('bw-mode');
            });

            // Download as Image functionality
            downloadImageBtn.addEventListener('click', function() {
                const originalText = downloadImageBtn.textContent;
                downloadImageBtn.textContent = '‚è≥ Capturing...';
                downloadImageBtn.disabled = true;

                // Apply black and white styles temporarily if selected
                if (downloadStyle === 'bw') {
                    document.body.classList.add('bw-mode');
                }

                html2canvas(document.querySelector('.container'), {
                    scale: 2,
                    useCORS: true,
                    backgroundColor: downloadStyle === 'bw' ? '#ffffff' : null
                }).then(canvas => {
                    const imageURL = canvas.toDataURL('image/png');
                    const link = document.createElement('a');
                    const fileName = downloadStyle === 'bw' 
                        ? 'adimai-naan-aandavarae-bw.png' 
                        : 'adimai-naan-aandavarae-color.png';
                    link.download = fileName;
                    link.href = imageURL;
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    
                    // Restore original styles
                    if (downloadStyle === 'bw') {
                        document.body.classList.remove('bw-mode');
                    }
                    
                    downloadImageBtn.textContent = originalText;
                    downloadImageBtn.disabled = false;
                }).catch(error => {
                    console.error('Error capturing image:', error);
                    alert('Error capturing image. Please try again.');
                    document.body.classList.remove('bw-mode');
                    downloadImageBtn.textContent = originalText;
                    downloadImageBtn.disabled = false;
                });
            });
            
            // Download as PDF functionality
            downloadPDFBtn.addEventListener('click', function() {
                const originalText = downloadPDFBtn.textContent;
                downloadPDFBtn.textContent = '‚è≥ Creating PDF...';
                downloadPDFBtn.disabled = true;

                // Apply black and white styles temporarily if selected
                if (downloadStyle === 'bw') {
                    document.body.classList.add('bw-mode');
                }

                html2canvas(document.querySelector('.container'), {
                    scale: 2,
                    useCORS: true,
                    backgroundColor: downloadStyle === 'bw' ? '#ffffff' : null
                }).then(canvas => {
                    const imgData = canvas.toDataURL('image/png');
                    const pdf = new jspdf.jsPDF('p', 'mm', 'a4');
                    const imgWidth = 210;
                    const pageHeight = 295;
                    const imgHeight = canvas.height * imgWidth / canvas.width;
                    let heightLeft = imgHeight;
                    let position = 0;
                    
                    pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);
                    heightLeft -= pageHeight;
                    
                    while (heightLeft >= 0) {
                        position = heightLeft - imgHeight;
                        pdf.addPage();
                        pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);
                        heightLeft -= pageHeight;
                    }
                    
                    const fileName = downloadStyle === 'bw' 
                        ? 'adimai-naan-aandavarae-bw.pdf' 
                        : 'adimai-naan-aandavarae-color.pdf';
                    pdf.save(fileName);
                    
                    // Restore original styles
                    if (downloadStyle === 'bw') {
                        document.body.classList.remove('bw-mode');
                    }
                    
                    downloadPDFBtn.textContent = originalText;
                    downloadPDFBtn.disabled = false;
                }).catch(error => {
                    console.error('Error creating PDF:', error);
                    alert('Error creating PDF. Please try again.');
                    document.body.classList.remove('bw-mode');
                    downloadPDFBtn.textContent = originalText;
                    downloadPDFBtn.disabled = false;
                });
            });
            
            // Print functionality
            printBtn.addEventListener('click', function() {
                window.print();
            });
            
            // Your existing transpose and toggle functions
            const chordMap = {
                'C': 0, 'C#': 1, 'Db': 1, 'D': 2, 'D#': 3, 'Eb': 3, 
                'E': 4, 'F': 5, 'F#': 6, 'Gb': 6, 'G': 7, 'G#': 8, 
                'Ab': 8, 'A': 9, 'A#': 10, 'Bb': 10, 'B': 11
            };
            
            const chordNames = Object.keys(chordMap);
            
            function transposeChord(chord, semitones) {
                const rootMatch = chord.match(/^([A-G][#b]?)/);
                if (!rootMatch) return chord;
                
                const root = rootMatch[1];
                const rest = chord.substring(root.length);
                
                let rootIndex = chordMap[root];
                let newRootIndex = (rootIndex + semitones + 12) % 12;
                
                const newRoot = chordNames.find(name => chordMap[name] === newRootIndex);
                
                return newRoot + rest;
            }
            
            function updateChords() {
                chords.forEach(chord => {
                    const originalText = chord.dataset.original || chord.textContent;
                    chord.dataset.original = originalText;
                    
                    if (transposeValue !== 0) {
                        chord.textContent = transposeChord(originalText, transposeValue);
                    } else {
                        chord.textContent = originalText;
                    }
                });
                
                transposeDisplay.textContent = transposeValue;
            }
            
            function toggleTransliteration() {
                showTransliteration = !showTransliteration;
                transliterationLines.forEach(line => {
                    line.style.display = showTransliteration ? 'flex' : 'none';
                });
                toggleTransliterationBtn.textContent = showTransliteration ? 'Hide Transliteration' : 'Show Transliteration';
                toggleTransliterationBtn.classList.toggle('active', showTransliteration);
            }
            
            function toggleTamil() {
                showTamil = !showTamil;
                tamilLines.forEach(line => {
                    line.style.display = showTamil ? 'flex' : 'none';
                });
                toggleTamilBtn.textContent = showTamil ? 'Hide Tamil' : 'Show Tamil';
                toggleTamilBtn.classList.toggle('active', showTamil);
            }
            
            minusBtn.addEventListener('click', function() {
                transposeValue--;
                updateChords();
            });
            
            plusBtn.addEventListener('click', function() {
                transposeValue++;
                updateChords();
            });
            
            resetBtn.addEventListener('click', function() {
                transposeValue = 0;
                updateChords();
            });
            
            toggleTransliterationBtn.addEventListener('click', toggleTransliteration);
            toggleTamilBtn.addEventListener('click', toggleTamil);
            
            updateChords();
        });
    </script>
</body>
</html>